<div class="container">
  <div class="controls">
    <mat-form-field appearance="outline" class="range-field">
      <mat-label>Year range</mat-label>
      <mat-select #rangeSelect [(value)]="selectedRange" (selectionChange)="onRangeChange()">
        @for (year of yearRanges; track year) {
          <mat-option [value]="year">
            {{ year.label }}
          </mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="category-field">
      <mat-label>Category</mat-label>
      <mat-select #categorySelect="matSelect" [(value)]="selectedCategory" (selectionChange)="onCategoryChange()">
        @for (c of categories; track c.value) {
          <mat-option [value]="c.value">{{ c.label }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>

  @if (loading) {
    <div class="loading-container">
      <mat-spinner diameter="50"></mat-spinner>
    </div>
  } @else {
    @if (pagedPrizes.length > 0) {
      <div class="prize-grid">
        @for (prize of pagedPrizes; track prize.id) {
          <mat-card class="prize-card">
            <mat-card-header>
              <mat-card-title>{{ prize.categoryFullName?.en || prize.category }}</mat-card-title>
              <mat-card-subtitle>{{ prize.awardYear || prize.year }}</mat-card-subtitle>
            </mat-card-header>

            <mat-card-content>
              <ul>
                @for (l of prize.laureates; track l.id) {
                  <li>
                    <a [routerLink]="['/laureate', l.id]" class="laur-name">
                      {{ l.fullName?.en || l.orgName?.en }}
                    </a>
                    @if (l.motivation) {
                      <span class="motivation"> â€” {{ l.motivation?.en || l.motivation }} </span>
                    }
                  </li>
                }
              </ul>
            </mat-card-content>
          </mat-card>
        }
      </div>
    } @else {
      <div class="empty">
        No results for selected range/category.
      </div>
    }
  }

  <mat-paginator
    [length]="length"
    [pageSize]="pageSize"
    [pageSizeOptions]="pageSizeOptions"
    (page)="onPageChange($event)"
    aria-label="Select page">
  </mat-paginator>
</div>
